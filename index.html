<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,
            user-scalable=no">
    <script type="module" src="https://pyscript.net/releases/2026.2.1/core.js"></script>
    <style>
    #result {font-size: 24px;font-weight: bold;}
    </style>
</head>

<body>
    <div style="padding:2em;">
        <input id="user" type="text" placeholder="1から50までの数字">
        <button mpy-click="start">数当て</button><br>
        <div id="result"></div>
    </div>

    <!-- pyscript -->
    <script type="mpy">
    import random
    from pyscript import document

    # 1～50までの乱数
    ans=random.randint(1,50)
    
    # グローバル変数
    n=0
    low=1
    high=50

    # 呼び出し関数
    def start(event):

        # 関数内のグローバル変数の宣言
        global n, ans, low, high
        
        # ユーザーからの入力
        user=document.getElementById("user").value
        
        # エラーハンドリング
        try:

        # 型変換（文字→整数値）
            x=int(user)

        except ValueError:
            result=document.getElementById("result")
            result.textContent="1から50までの数字を入力してください"
            result.style.color="black"
            return

        # 回数のカウント
        n += 1

        # 判定
        if x==ans:
            msg=f"お見事！　正解は、{ans}です。あなたは{n}回で当てました！"
            color="red"
        elif x<low:
            msg=f"小さすぎます。{low}以上です。"
            color="black"
        elif x>high:
            msg=f"大きすぎます。{high}以下です。"
            color="black"
        elif x>low and x<ans:
            low=x
            msg=f"ヒント：{low} => {high}"
            color="blue"
        elif x<high and x>ans:
            high=x
            msg=f"ヒント：{low} => {high}"
            color="blue"
        else:
            msg=f"もう一度、入力してください"
            color="black"
        # 結果表示
        result=document.getElementById("result")
        result.textContent=msg # テキスト更新
        result.style.color=color # 文字色を変更
    </script>
</body>

</html>



